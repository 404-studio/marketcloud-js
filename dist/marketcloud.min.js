/*

*	Marketcloud Javascript SDK
*   http://www.marketcloud.it
*
*	Copyright (c) 2015 Herapi SRLS
*
*	Written by Mattia Alfieri <m.alfieri@marketcloud.it>
*

*/
(function(){function k(c,b,a,f){b={i:a,error:f,data:b,headers:{}};b.headers.o=null===d.b?d.f:d.f+":"+d.b;0>c.indexOf("http://")&&(b.url=d.l+c);b.method="PUT";Request(b)}function l(c,b,a,f){b={i:a,error:f,data:b,headers:{}};b.headers.o=null===d.b?d.f:d.f+":"+d.b;0>c.indexOf("http://")&&(b.url=d.l+c);b.method="PATCH";Request(b)}function g(c,b,a,f){b={i:a,error:f,data:b,headers:{}};b.headers.o=null===d.b?d.f:d.f+":"+d.b;0>c.indexOf("http://")&&(b.url=d.l+c);b.method="POST";Request(b)}function h(c,b,
a){b={i:b,error:a,headers:{}};b.headers.o=null===d.b?d.f:d.f+":"+d.b;0>c.indexOf("http://")&&(b.url=d.l+c);b.method="DELETE";Request(b)}function e(c,b,a,f){a={i:a,error:f,headers:{}};a.headers.o=null===d.b?d.f:d.f+":"+d.b;0>c.indexOf("http://")&&(a.url=d.l+c);0<Object.keys(b).length&&(c=m(b,b),a.url+="?"+encodeURI(c.substring(0,c.length-1).split(" ").join("+")));a.method="GET";Request(a)}function n(){window.H&&console.log(Array.prototype.slice.call(arguments))}function m(c,b,a){var f="",d;for(d in c)a&&
b[a]&&0!==b[a].indexOf(c[d])&&(f+=a),f=b[d]?f+d:f+("["+d+"]"),c[d]instanceof Array?f+=m(c[d],b,d):c[d]instanceof Object?f+=m(c[d],b):(f+="="+c[d],f+="&");return f}function p(){try{return new XMLHttpRequest}catch(c){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}return null}
Request=function(c){var b=new p;b.open(c.method,c.url,!0);b.onreadystatechange=function(){if(4===b.readyState)if(3<Number(b.status.toString()[0])){if(c.hasOwnProperty("error")){if("function"!==typeof c.error)throw Error("error must be function");n(JSON.parse(b.responseText));c.error(JSON.parse(b.responseText),b.status)}}else if(c.hasOwnProperty("success")){if("function"!==typeof c.i)throw Error("success must be function");n(JSON.parse(b.responseText));c.i(JSON.parse(b.responseText),b.status)}};b.setRequestHeader("Content-Type",
"application/json");if(c.hasOwnProperty("headers"))for(var a in c.headers)b.setRequestHeader(a,c.headers[a]);n("Firing this request object ",c);c.hasOwnProperty("data")?b.send(JSON.stringify(c.data)):b.send()};var d={f:null,b:null,l:"http://api.marketcloud.it/v0",j:{},v:{},g:{},w:{},A:{},s:{},C:{},D:{},m:{},F:{},h:{}};d.v.list=function(c,b){var a=a||{};e("/brands",a,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.v.c=function(c,b){e("/brands/"+c,{},function(a){b(null,a.data)},function(a){b(a.a[0],
null)})};d.j.create=function(c,b){g("/addresses/",c,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.j.update=function(c,b,a){k("/addresses/"+c,b,function(b){a(null,b.data)},function(b){a(b.a[0],null)})};d.j["delete"]=function(c,b){h("/addresses/"+c,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.j.list=function(c,b){var a=a||{};e("/addresses",a,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.j.c=function(c,b){e("/addresses/"+c,{},function(a){b(null,a.data)},function(a){b(a.a[0],
null)})};d.w.list=function(c,b){var a=a||{};e("/categories",a,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.w.c=function(c,b){e("/categories/"+c,{},function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.A.list=function(c,b){var a=a||{};e("/currencies",a,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.A.c=function(c,b){e("/currencies/"+c,{},function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.s.create=function(c,b){g("/orders/",c,function(a){b(null,a.data)},function(a){b(a.a[0],
null)})};d.s.list=function(c,b){var a=a||{};e("/orders",a,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.s.c=function(c,b){e("/orders/"+c,{},function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.C.list=function(c,b){var a=a||{};e("/products",a,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.C.c=function(c,b){e("/products/"+c,{},function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.D.list=function(c,b){var a=a||{};e("/shippings",a,function(a){b(null,a.data)},function(a){b(a.a[0],
null)})};d.D.c=function(c,b){e("/shippings/"+c,{},function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.m.create=function(c,b){g("/stores/",c,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.m.update=function(c,b,a){k("/stores/"+c,b,function(b){a(null,b.data)},function(b){a(b.a[0],null)})};d.m["delete"]=function(c,b){h("/stores/"+c,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.m.list=function(c,b){var a=a||{};e("/stores",a,function(a){b(null,a.data)},function(a){b(a.a[0],
null)})};d.m.c=function(c,b){e("/stores/"+c,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.F.list=function(c,b){var a=a||{};e("/taxes",a,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.F.c=function(c,b){e("/taxes/"+c,{},function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.h.create=function(c,b){g("/users/",c,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.h.update=function(c,b,a){k("/users/"+c,b,function(b){a(null,b.data)},function(b){a(b.a[0],null)})};
d.h["delete"]=function(c,b){h("/users/"+c,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.h.list=function(c,b){var a=a||{};e("/users",a,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.h.c=function(c,b){e("/users/"+c,{},function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.h.N=function(c){e("/users/"+d.u.id,{},function(b){c(null,b.data)},function(b){c(b.a[0],null)})};d.h.I=function(c,b,a){d.b=null;d.u=null;g("/users/"+c+"/authenticate",{R:b},function(b){d.b=b.data.b;d.u=
b.data.u;a(null,b.data)},function(b){a(b.a[0],null)})};d.g.create=function(c,b){var a=null,a=c instanceof Array?{items:c}:c;g("/carts",a,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.g.add=function(c,b,a){if(b instanceof Array)l("/carts/"+c,[{B:"add",items:b}],function(b){a(null,b.data)},function(b){a(b.a[0],null)});else throw Error("addToCart(cart_id,data,callback) data must be an array [{product_id :1,quantity : 7}]");};d.g.remove=function(c,b,a){if(b instanceof Array)l("/carts/"+
c,[{B:"remove",items:b}],function(b){a(null,b.data)},function(b){a(b.a[0],null)});else throw Error("removeFromCart(cart_id,data,callback) data must be an array [{product_id :1,product_id : 7}]");};d.g.update=function(c,b,a){if(b instanceof Array)l("/carts/"+c,[{B:"update",items:b}],function(b){a(null,b.data)},function(b){a(b.a[0],null)});else throw Error("removeFromCart(cart_id,data,callback) data must be an array [{product_id :1,product_id : 7}]");};d.g.c=function(c,b){e("/carts/"+c,{},function(a){b(null,
a.data)},function(a){b(a.a[0],null)})};d.g.M=function(c,b){e("/carts",{P:c},function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.g.K=function(c,b){if("number"!==typeof c.G)throw Error("marketcloud.carts.checkout(data,callback) data.cart_id must be Integer.");if("object"!==typeof c.J)throw Error("marketcloud.carts.checkout(data,callback) data.billing_address must be Object.");if("object"!==typeof c.S)throw Error("marketcloud.carts.checkout(data,callback) data.shipping_address must be Object.");
g("/carts/"+c.G+"/checkout",c,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};d.g["delete"]=function(c,b){h("/carts/"+c,function(a){b(null,a.data)},function(a){b(a.a[0],null)})};"undefined"!==typeof module?module.L=d:"undefined"!==typeof window&&(window.O=d)})();